<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prof. Antonio Adinolfi - Digital Hub</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;500;800&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
  
  <style>
    :root {
      --brand: #6366f1; /* Indigo Moderno */
      --brand-dark: #4338ca;
      --bg-gradient: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      --glass: rgba(255, 255, 255, 0.7);
      --glass-border: rgba(255, 255, 255, 0.3);
      --text-prime: #0f172a;
      --radius-lg: 24px;
      --shadow-soft: 0 20px 25px -5px rgba(0, 0, 0, 0.05), 0 8px 10px -6px rgba(0, 0, 0, 0.05);
    }

    body {
      margin: 0;
      font-family: 'Plus Jakarta Sans', sans-serif;
      background: var(--bg-gradient);
      color: var(--text-prime);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* === NAVBAR NEUMORFICA === */
    .navbar {
      position: sticky;
      top: 20px;
      margin: 0 20px;
      background: var(--glass);
      backdrop-filter: blur(15px);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-lg);
      padding: 12px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 1000;
      box-shadow: var(--shadow-soft);
    }

    .logo-box {
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 800;
      letter-spacing: -1px;
      font-size: 1.2rem;
    }

    /* === DASHBOARD GRID (MODERNA) === */
    main {
      max-width: 1200px;
      margin: 40px auto;
      padding: 0 20px;
    }

    .hero-section {
      display: grid;
      grid-template-columns: 1fr 2fr;
      gap: 30px;
      margin-bottom: 60px;
    }

    .glass-card {
      background: var(--glass);
      backdrop-filter: blur(10px);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-lg);
      padding: 30px;
      box-shadow: var(--shadow-soft);
      transition: transform 0.3s ease;
    }

    .glass-card:hover { transform: translateY(-5px); }

    /* === COURSE CARDS (GRID ORIGINALE) === */
    .course-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 25px;
      padding: 0;
      list-style: none;
    }

    .course-item {
      background: white;
      border-radius: var(--radius-lg);
      padding: 25px;
      border: 1px solid #f1f5f9;
      position: relative;
      overflow: hidden;
    }

    .course-item::after {
      content: "";
      position: absolute;
      top: 0; left: 0; width: 6px; height: 100%;
      background: var(--brand);
    }

    .btn-modern {
      background: var(--brand);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: 0.2s;
    }

    .btn-modern:hover { background: var(--brand-dark); box-shadow: 0 10px 15px -3px rgba(99, 102, 241, 0.4); }

    /* Access Cards (3-Column Layout) */
    .access-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 30px;
      margin-top: 50px;
    }

    @media (max-width: 768px) {
      .hero-section, .access-container { grid-template-columns: 1fr; }
      .navbar { top: 10px; margin: 0 10px; }
    }
  </style>
</head>
<body>

<nav class="navbar">
  <div class="logo-box">
    <div style="background: var(--brand); width: 40px; height: 40px; border-radius: 10px; display: grid; place-items: center; color: white;">A</div>
    <span>Prof. Adinolfi</span>
  </div>
  <div id="authSection">
    <div id="g_id_signin"></div>
  </div>
</nav>

<main>
  <section class="hero-section">
    <div class="glass-card" style="text-align: center;">
      <img src="./immagini/foto_adinolfi.jpg" alt="Prof" style="width: 120px; height: 120px; border-radius: 50%; border: 4px solid white; box-shadow: var(--shadow-soft);">
      <h3 style="margin: 15px 0 5px;">Antonio Adinolfi</h3>
      <p style="color: #64748b; font-size: 0.9rem;">Computer Science & Web Dev</p>
      <div style="display: flex; justify-content: center; gap: 15px; margin-top: 20px;">
        <i data-lucide="github"></i>
        <i data-lucide="linkedin"></i>
        <i data-lucide="youtube"></i>
      </div>
    </div>
    
    <div class="glass-card">
      <h2 style="font-weight: 800; font-size: 1.8rem; margin-top: 0;">Benvenuti nel Hub Didattico</h2>
      <p>Esplora le risorse, i laboratori Python e i progetti ministeriali del Liceo Scientifico N. Cortese.</p>
      <div id="alertBox" style="display: none; background: #e0f2fe; padding: 15px; border-radius: 12px; border: 1px solid #7dd3fc; color: #0369a1;">
        <strong>ðŸš€ ModalitÃ  Docente Attiva:</strong> Accesso completo ai materiali riservati.
      </div>
    </div>
  </section>

  <div id="protectedContent" style="display: none;">
    <h3 style="margin-bottom: 25px;">ðŸ“˜ I Tuoi Corsi</h3>
    <div class="course-grid">
      <div class="course-item">
        <h4>Sviluppo Web Avanzato</h4>
        <p style="font-size: 0.85rem; color: #64748b;">Architetture Full-Stack, HTML5, CSS Grid e JS moderno.</p>
        <div style="margin-top: 20px; display: flex; gap: 10px;">
          <a href="#" class="btn-modern"><i data-lucide="book-open" style="width: 16px;"></i> Materiali</a>
          <a href="#" class="btn-modern" style="background: #10b981;"><i data-lucide="code" style="width: 16px;"></i> Python</a>
        </div>
      </div>
      </div>
  </div>

  <div id="accessZones" class="access-container">
    <div class="glass-card">
      <h5><i data-lucide="shield-check"></i> Area Istituzionale</h5>
      <p style="font-size: 0.8rem;">Accesso riservato dominio @lscortese.com</p>
      <div id="googleBtnContainer"></div>
      <div id="school-feed" style="margin-top: 20px;"></div>
    </div>
    
    <div class="glass-card" style="border-top: 4px solid #f59e0b;">
      <h5><i data-lucide="users"></i> Area Tutor</h5>
      <a href="https://unica.istruzione.gov.it" class="btn-modern" style="width: 100%; justify-content: center; background: #f59e0b;">Piattaforma UNICA</a>
      <div id="tecnica-feed" style="margin-top: 20px;"></div>
    </div>

    <div class="glass-card">
      <h5><i data-lucide="globe"></i> Area Ospiti</h5>
      <a href="ospiti.html" class="btn-modern" style="width: 100%; justify-content: center; background: #94a3b8;">Entra come Visitatore</a>
      <div id="rss-feed" style="margin-top: 20px;"></div>
    </div>
  </div>
</main>

<script src="https://accounts.google.com/gsi/client" async defer></script>
<script>
  // Inizializzazione icone Lucide
  lucide.createIcons();

  // Sicurezza Accessi migliorata
  function handleCredentialResponse(response) {
    try {
      // Decodifica sicura con controllo dominio
      const payload = JSON.parse(atob(response.credential.split('.')[1]));
      
      if (payload.email.endsWith("@lscortese.com")) {
        // Logica di sessione
        sessionStorage.setItem('user_token', response.credential);
        showProtectedMode(payload.given_name);
      } else {
        alert("Accesso negato: Solo account @lscortese.com");
      }
    } catch (e) {
      console.error("Errore validazione sessione");
    }
  }

  function showProtectedMode(name) {
    document.getElementById('accessZones').style.display = 'none';
    document.getElementById('protectedContent').style.display = 'block';
    document.getElementById('alertBox').style.display = 'block';
    document.getElementById('alertBox').innerHTML = `Bentornato, <strong>${escapeHTML(name)}</strong>! Sessione attiva. <button onclick="location.reload()" style="background:none; border:none; color:red; cursor:pointer; text-decoration:underline;">Logout</button>`;
  }

  // Sanitizzazione contro XSS
  function escapeHTML(str) {
    const p = document.createElement('p');
    p.textContent = str;
    return p.innerHTML;
  }

  window.onload = function () {
    google.accounts.id.initialize({
      client_id: "1011752872320-713mjtge9ofhtnclhjfvdoc2h2q2uelv.apps.googleusercontent.com",
      callback: handleCredentialResponse
    });
    google.accounts.id.renderButton(
      document.getElementById("googleBtnContainer"),
      { theme: "outline", size: "large", width: "100%" }
    );
  };
</script>

</body>
</html>
